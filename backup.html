<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <title>How to Create and Save text file in JavaScript</title>
    <script src="js/FileSaver.js"></script>
    <script>

		function saveDynamicDataToFile() {
    var userInput =  localStorage.getItem("eventtitle");
			 var blob = new Blob([userInput], { type: "text/plain;charset=utf-8" });
            saveAs(blob, "dynamic.txt");
        }

    </script>
</head>
<body>
  <div class="backup-content">


  <div class="downloadbackup">
    <h1>Download BackUp</h1>
    <div>
      <button type="button" onclick="saveDynamicDataToFile();">Download</button>
    </div>


  </div>
  
<div class="uploadbackupfile">
  <h1>Upload BackUp File</h1>
<div>
  <input type="file" name="inputfile"
  id="inputfile">
</div>

<br>

<h1 style="color: red;" id="output"></h1>
<div>
  <button type="button" onclick="uploadfileonly();">Upload</button>
</div>
<div>
  <button type="button" onclick="uploadfileonlyWithDynamicdata();">Upload With Old Data</button>
</div>
</div>
<a class="backtohome" href="index.html">Back to Home</a>	
</div>

<script type="text/javascript">
// document.getElementById('inputfile')
//   .addEventListener('change', function() {
//    var fr=new FileReader();
//   fr.onload=function(){
//       document.getElementById('output').innerHTML="Success"
//               // .textContent=fr.result;
//     localStorage.setItem("eventtitle",fr.result);
//   }
    
//   fr.readAsText(this.files[0]);
// })

const uploadfileonly = () =>{
  var fr=new FileReader();
  fr.onload=function(){
      document.getElementById('output').innerHTML="Success"
              // .textContent=fr.result;
    localStorage.setItem("eventtitle",fr.result);
  }
    
  fr.readAsText(document.getElementById('inputfile').files[0]);
}


const uploadfileonlyWithDynamicdata = ()=>{
  var fr=new FileReader();
  fr.onload=function(){
      document.getElementById('output').innerHTML="Success"
          var olddata = JSON.parse(localStorage.getItem("eventtitle"));
        var alldata =  {...olddata,...JSON.parse(fr.result)}
    localStorage.setItem("eventtitle",JSON.stringify(alldata));
  }
    
  fr.readAsText(document.getElementById('inputfile').files[0]);
}


</script>

</body>
</html>